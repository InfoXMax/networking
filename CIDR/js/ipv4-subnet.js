var networkAddress=new Array(10,0,0,0),networkMask=new Array(255,0,0,0),maskBitsArr=new Array,maskMap=new Array,privateAddressBlocks=new Array,addressBlock="10.0.0.0/8",addressBlockMandatoryBits=8,userMaskBits=8,subnetBits=0,hostBits=0,maskBit=1,maxMaskBits=32,usableMaxMaskBits=30,MAX_SIZE_OF_SUBNET=1024,ACTION="initialize";function calculateAndUpdateValues(t,e){var s="",n="",a="",r="",o="",d="",i="",c=document.getElementById("addressBlock"),l=document.getElementById("subnetMask"),u=document.getElementById("hostBits"),p=document.getElementById("subnetBits");"initialize"!=t&&(ACTION=t,n=c.value,addressBlock=n,r=l.options[l.selectedIndex].value,o=u.options[u.selectedIndex].value,i=parseInt(p.options[p.selectedIndex].value,10),-1==n.indexOf("/")&&(addressBlock=n+="/8"),""==(s=n.split("/"))[1]&&(s[1]=8,addressBlock=n+="8"),d=s[0],30<parseInt(s[1])?(addressBlockMandatoryBits=30,n=n.replace("/"+s[1],"/"+addressBlockMandatoryBits),addressBlock=n):addressBlockMandatoryBits=parseInt(s[1])),"initialize"==t?(addressBlockMandatoryBits=8,document.getElementById("addressBlock").value=addressBlock,d="10.0.0.0",a=getMaskBitsForSubnetMask(r="255.0.0.0"),o=maxMaskBits-a,i=a-parseInt(addressBlockMandatoryBits)):"setAddressBlock"==t?(a=parseInt(addressBlockMandatoryBits),r=maskMap[a],o=maxMaskBits-a,i=a-parseInt(addressBlockMandatoryBits)):"setAddress"==t?(a=parseInt(addressBlockMandatoryBits),r=maskMap[a],o=maxMaskBits-a,i=a-parseInt(addressBlockMandatoryBits)):"setSubnetMask"==t?(a=getMaskBitsForSubnetMask(r),r=maskMap[a],o=maxMaskBits-a,i=a-parseInt(addressBlockMandatoryBits)):"setNoOfHosts"==t?(r=maskMap[a=maxMaskBits-o],i=a-parseInt(addressBlockMandatoryBits)):"setNoOfSubnets"==t&&(a=parseInt(addressBlockMandatoryBits)+parseInt(i),r=maskMap[a],o=parseInt(maxMaskBits-a,10)),setNetworkAddress(d),setNetworkMask(r),setMaskBits(a),setHostBits(o),setSubnetBits(i),updateValues(e)}function getMaskBitsForSubnetMask(t){for(var e=0;e<maskMap.length;e++)if(maskMap[e]==t)return e}function setMaskBits(t){userMaskBits=t}function setHostBits(t){hostBits=t}function setNetworkAddress(t){var e=t.split(".");networkAddress[0]=parseInt(e[0]),networkAddress[1]=parseInt(e[1]),networkAddress[2]=parseInt(e[2]),networkAddress[3]=parseInt(e[3])}function setNetworkMask(t){var e,s;e=t.split("."),s=getMaskBitsForSubnetMask(t),networkMask[0]=parseInt(e[0]),networkMask[1]=parseInt(e[1]),networkMask[2]=parseInt(e[2]),networkMask[3]=parseInt(e[3]),setMaskBits(s)}function setSubnetBits(t){subnetBits=t}function getNumberOfSubnets(){return Math.pow(2,subnetBits)}function getPossibleNoOfSubnetList(){var t=new Array;maxSubnetBits=maxMaskBits-addressBlockMandatoryBits;for(var e=0;e<=maxSubnetBits;e++)t.push(new Array(e,Math.pow(2,e)));return t}function getNumberOfHosts(){return Math.pow(2,hostBits)}function getPossibleNoOfHostsList(){var t=new Array;maxHostBits=maxMaskBits-addressBlockMandatoryBits;for(var e=0;e<=maxHostBits;e++)t.push(new Array(e,Math.pow(2,e)));return t}function setSubnetMaskForDesignNetwork(t){clearOptions(t);for(var e=addressBlockMandatoryBits;e<maskMap.length;e++)addOption(t,maskMap[e]+"/"+e,maskMap[e]);selectOption(t,maskMap[userMaskBits])}function setMaskBitsForDesignNetwork(t){for(clearOptions(t),i=addressBlockMandatoryBits;i<=maskBitsArr.length;i++)addOptionForCidr(t,maskBitsArr[i-1],maskBitsArr[i-1]);selectOption(t,userMaskBits)}function updateValues(t){"design"==t&&updateDesignNetworkValues()}function updateDesignNetworkValues(){var t,e=0,s=0,n=0,a=0,r=0,o=0;s=calculateWildCardMask(networkMask),t=getBitsFromMask(networkMask),n=getSubnetId(networkAddress,networkMask),a=broadcastAddress(networkAddress,s),r=calculateStartIpAddress(networkAddress,networkMask),startIpAddress=r.join("."),o=calculateEndIpAddress(networkAddress,s),endIpAddress=o.join("."),31<=addressBlockMandatoryBits||31<=userMaskBits?(document.getElementById("addressRange_cidr").innerHTML="&nbsp;&nbsp;-&nbsp;&nbsp;",document.getElementById("cidrNotation").innerHTML="&nbsp;&nbsp;-&nbsp;&nbsp;",document.getElementById("broadcast_cidr").innerHTML="&nbsp;&nbsp;-&nbsp;&nbsp;",document.getElementById("wildcard_cidr").innerHTML="&nbsp;&nbsp;-&nbsp;&nbsp;"):(document.getElementById("addressRange_cidr").innerHTML=startIpAddress+"&nbsp;&nbsp;-&nbsp;&nbsp;"+endIpAddress,document.getElementById("cidrNotation").innerHTML=n.join(".")+"/"+t,document.getElementById("broadcast_cidr").innerHTML=a.join("."),document.getElementById("wildcard_cidr").innerHTML=s.join(".")),setSubnetMaskForDesignNetwork(document.getElementById("subnetMask")),setDesignNetworkOptions(document.getElementById("addressBlock")),setHostsList(document.getElementById("hostBits")),setSubnetList(document.getElementById("subnetBits"));var d=getNumberOfSubnets();if(MAX_SIZE_OF_SUBNET<d){e=generateNetworkAddressRange(0,MAX_SIZE_OF_SUBNET);var i=getDottedArray(),c=generateNetworkAddressRange(d-MAX_SIZE_OF_SUBNET,d);e=e.concat(i).concat(c)}else e=generateNetworkAddressRange(0,d);31<=addressBlockMandatoryBits||31<=userMaskBits?(document.getElementById("SubnetDetailsDiv").style.display="none",document.getElementById("tableDiv").style.display="none"):createTable(e)}function getDottedArray(){for(var t=new Array,e=0;e<2;e++)t[e]=["..","..","..","..","..",".."];return t}function generateNetworkAddressRange(t,e){var s,n,a,r=new Array;s=convertOctetToBinary(networkAddress.join(".")).substr(0,addressBlockMandatoryBits),Array(subnetBits+1).join(0),n=Array(32-(addressBlockMandatoryBits+subnetBits)+1).join(0),noOfSubnets=getNumberOfSubnets();for(var o=0,d=t;d<e;d++){var i="";lengthOfBinaryBits=d.toString(2).length,i=lengthOfBinaryBits<subnetBits?(i=Array(subnetBits-lengthOfBinaryBits+1).join(0)).concat(d.toString(2)):d.toString(2),a=s.toString()+i.toString()+n.toString(),tempNetAddress=convertBinaryToOctet(a),r[o]=new Array(d,tempNetAddress,networkMask,0,0,d+1),o+=1}return getSubnetDetails(r),r}function getSubnetDetails(t){for(var e=0,s=0,n=0,a=0,r=0,o=0,d=0,i=0;i<t.length;i++)a=broadcastAddress(e=t[i][1].split("."),n=calculateWildCardMask(s=t[i][2])),r=calculateStartIpAddress(e,s),o=calculateEndIpAddress(e,n),startIpAddress=r.join("."),endIpAddress=o.join("."),d=startIpAddress+" - "+endIpAddress,t[i][3]=31<=addressBlockMandatoryBits||31<=userMaskBits?"--":d,t[i][4]=a.join(".")}function createTable(t){for(row=new Array,cell=new Array,row_num=t.length+1,cell_num=4,divElement=document.createElement("div"),tableElement=document.createElement("table"),tableElement.setAttribute("id","newtable"),tableElement.setAttribute("width","100%"),tableElement.setAttribute("class","table table-responsive"),divElement.setAttribute("id","newDiv"),t.length<5?divElement.setAttribute("style","height: auto;width:100%"):divElement.setAttribute("style","height: 100%;overflow:auto;width:100%"),tableBodyElement=document.createElement("tbody"),c=0;c<row_num;c++){for(row[c]=document.createElement("tr"),k=0;k<cell_num;k++){if(cell[k]=document.createElement("td"),cell[k].setAttribute("class","table-responsive"),0==c)switch(0==k?cell[k].setAttribute("style","font-size:14px;width:80px;line-height:30px;"):cell[k].setAttribute("style","font-size:14px;width:173px;line-height:30px;"),k){case 0:cont=document.createTextNode("Subnet ID");break;case 1:cont=document.createTextNode("Subnet Address");break;case 2:cont=document.createTextNode("Host Address Range");break;case 3:cont=document.createTextNode("Broadcast Address")}else switch(0==k?cell[k].setAttribute("style","font-size:14px;width:80px;line-height:30px;"):cell[k].setAttribute("style","font-size:14px;width:103px;line-height:30px;"),k){case 0:cont=document.createTextNode(t[c-1][5]);break;case 1:cont=document.createTextNode(t[c-1][1]);break;case 2:cont=document.createTextNode(t[c-1][3]);break;case 3:cont=document.createTextNode(t[c-1][4])}cell[k].appendChild(cont),row[c].appendChild(cell[k])}tableBodyElement.appendChild(row[c])}tableElement.appendChild(tableBodyElement),divElement.appendChild(tableElement),document.getElementById("tableDiv").innerHTML="",document.getElementById("SubnetDetailsDiv").style.display="block",document.getElementById("tableDiv").style.display="block",document.getElementById("tableDiv").appendChild(divElement)}function calculateWildCardMask(t){for(var e=new Array(0,0,0,0),s=0;s<4;s++)e[s]=255-t[s];return e}function calculateEndIpAddress(t,e){var s=convertOctetToDecimal(new broadcastAddress(t,e));return convertDecimalToOctet(s-=1)}function broadcastAddress(t,e){for(var s=new Array(0,0,0,0),n=0;n<4;n++)s[n]=t[n]|e[n];return s}function calculateStartIpAddress(t,e){var s=convertOctetToDecimal(getSubnetId(t,e));return convertDecimalToOctet(s+=1)}function getSubnetId(t,e){for(var s=new Array(0,0,0,0),n=0;n<4;n++)s[n]=t[n]&e[n];return s}function calculateHost(t){var e=32-getBitsFromMask(t);return Math.pow(2,e)-2}function getBitsFromMask(t){var e=convertOctetToDecimal(t);return maskBinary=e.toString(2),maskBinary.indexOf(0)}function convertBinaryToOctet(t){return toReturn=new Array(0,0,0,0),tempArray=new Array(0,0,0,0),tempArray[0]=t.substr(0,8),tempArray[1]=t.substr(8,8),tempArray[2]=t.substr(16,8),tempArray[3]=t.substr(24,8),toReturn[0]=parseInt(tempArray[0],2),toReturn[1]=parseInt(tempArray[1],2),toReturn[2]=parseInt(tempArray[2],2),toReturn[3]=parseInt(tempArray[3],2),toReturn.join(".")}function convertOctetToBinary(t){octetBits=8,addressDecimalArray=t.split("."),toReturn=new Array(0,0,0,0),toReturn[0]=parseInt(addressDecimalArray[0],10).toString(2),toReturn[1]=parseInt(addressDecimalArray[1],10).toString(2),toReturn[2]=parseInt(addressDecimalArray[2],10).toString(2),toReturn[3]=parseInt(addressDecimalArray[3],10).toString(2);for(var e=0;e<toReturn.length;e++)lengthOfBinaryBits=toReturn[e].length,lengthOfBinaryBits<octetBits?(subnetBinaryString=Array(octetBits-lengthOfBinaryBits+1).join(0),toReturn[e]=subnetBinaryString.concat(toReturn[e])):toReturn[e]=toReturn[e];return toReturn.join("")}function getOctetFromBits(t){if((t=parseInt(t))<0|32<t)return!1;var e=parseInt("11111111111111111111111111111111".substring(0,t),2),s=32-t;return convertDecimalToOctet(e*=Math.pow(2,s))}function convertOctetToDecimal(t){var e=0;return e+=16777216*parseInt(t[0]),e+=65536*t[1],(e+=256*t[2])+t[3]}function convertDecimalToOctet(t){var e=t.toString(2);return e="00000000000000000000000000000000".substring(0,32-e.length)+e,new Array(parseInt(e.substring(0,8),2),(16711680&t)/65536,(65280&t)/256,255&t)}function updateValuesForCIDR(t,e){var s=t.split("/");if(2==s.length){var n=s[0].split(".");networkAddress[0]=parseInt(n[0]),networkAddress[1]=parseInt(n[1]),networkAddress[2]=parseInt(n[2]),networkAddress[3]=parseInt(n[3]),networkMask=getOctetFromBits(s[1])}else{var a=t.split(".");networkAddress[0]=parseInt(a[0]),networkAddress[1]=parseInt(a[1]),networkAddress[2]=parseInt(a[2]),networkAddress[3]=parseInt(a[3]),networkMask=getOctetFromBits("cidr"==e?document.getElementById("maskBits_cidr").value:document.getElementById("maskBits").value)}updateValues(e)}function calculateSubnet(t,e){-1==t.indexOf(".")&&(maskBit=t,t=maskMap[parseInt(t)]);var s=t.split(".");networkMask[0]=parseInt(s[0]),networkMask[1]=parseInt(s[1]),networkMask[2]=parseInt(s[2]),networkMask[3]=parseInt(s[3]),updateValues(e)}function calculateHosts(t,e){networkMask=getOctetFromBits(t),updateValues(e)}function setSubnetMask(t,e,s){t.length=0;var n=new Array(0,0,0,0),a=0;for(1<=e[0]&&e[0]<=126?(n[a++]=255,document.getElementById("classA").checked=!0):128<=e[0]&&e[0]<=191?(n[a++]=255,n[a++]=255,document.getElementById("classB").checked=!0):192<=e[0]&&e[0]<=223&&(n[a++]=255,n[a++]=255,n[a++]=255,document.getElementById("classC").checked=!0);a<4;){var r=n[0]+"."+n[1]+"."+n[2]+"."+n[3];addOption(t,r,r);for(var o=7;0<=o&&!(3==a&&o<2);)n[a]=n[a]+Math.pow(2,o),addOption(t,r=n[0]+"."+n[1]+"."+n[2]+"."+n[3],r),o--;a++}selectOption(t,s)}function setSubnetMaskForCidr(t,e,s){t.length=0;for(var n=new Array(0,0,0,0),a=0;a<4;){var r=n[0]+"."+n[1]+"."+n[2]+"."+n[3];addOption(t,r,r);for(var o=7;0<=o&&!(3==a&&o<2);)n[a]=n[a]+Math.pow(2,o),addOption(t,r=n[0]+"."+n[1]+"."+n[2]+"."+n[3],r),o--;a++}selectOption(t,s)}function setDesignNetworkOptions(t){document.getElementById("addressBlock").value=addressBlock}function setHostsList(t){var e;clearOptions(t),e=getPossibleNoOfHostsList();for(var s=0;s<e.length;s++)addOption(t,e[s][1],e[s][0]);selectOption(t,hostBits)}function setSubnetList(t){var e;clearOptions(t),e=getPossibleNoOfSubnetList();for(var s=0;s<e.length;s++)addOption(t,e[s][1],e[s][0]);selectOption(t,subnetBits)}function setNumberOfHosts(t,e,s){var n=8;for(1<=e[t.length=0]&&e[0]<=126?n=24:128<=e[0]&&e[0]<=191?n=16:192<=e[0]&&e[0]<=223&&(n=8);2<=n;)addOption(t,Math.pow(2,n)-2,32-n),n--;selectOption(t,s)}function setNumberOfHostsForCidr(t,e,s){var n=8;for(1<=e[t.length=0]&&e[0]<=126?n=24:128<=e[0]&&e[0]<=191?n=16:192<=e[0]&&e[0]<=223&&(n=8),n=31;2<=n;)addOption(t,Math.pow(2,n)-2,32-n),n--;selectOption(t,s)}function populateMaskBits(t,e){if(0==maskBitsArr.length)for(i=0;i<usableMaxMaskBits;i++)maskBitsArr[i]=i+1,addOptionForCidr(t,maskBitsArr[i],maskBitsArr[i]);selectOption(t,e)}function clearOptions(t){for(var e=t.options.length-1;0<=e;e--)t.remove(e)}function addOption(t,e,s){var n=document.createElement("option");n.text=e,n.value=s;try{t.add(n,null)}catch(e){t.add(n)}}function addOptionForCidr(t,e,s){var n=document.createElement("option");n.text="/"+e,n.value=s;try{t.add(n,null)}catch(e){t.add(n)}}function selectOption(t,e){for(var s=0;s<t.length;s++)if(t[s].value==e){t.selectedIndex=s;break}}function subnetBitmap(t,e){var s="",n=0,a=getBitsFromMask(e);for(1<=t[0]&&t[0]<=126?n=(s="0nnnnnnn").length:128<=t[0]&&t[0]<=191?n=(s="10nnnnnn.nnnnnnnn").length-1:192<=t[0]&&t[0]<=223&&(n=(s="110nnnnn.nnnnnnnn.nnnnnnnn").length-2);n<a;)n%8==0&&(s+="."),s+="s",n++;for(;n<32;)n%8==0&&(s+="."),s+="h",n++;return s}maskMap[1]="128.0.0.0",maskMap[2]="192.0.0.0",maskMap[3]="224.0.0.0",maskMap[4]="240.0.0.0",maskMap[5]="248.0.0.0",maskMap[6]="252.0.0.0",maskMap[7]="254.0.0.0",maskMap[8]="255.0.0.0",maskMap[9]="255.128.0.0",maskMap[10]="255.192.0.0",maskMap[11]="255.224.0.0",maskMap[12]="255.240.0.0",maskMap[13]="255.248.0.0",maskMap[14]="255.252.0.0",maskMap[15]="255.254.0.0",maskMap[16]="255.255.0.0",maskMap[17]="255.255.128.0",maskMap[18]="255.255.192.0",maskMap[19]="255.255.224.0",maskMap[20]="255.255.240.0",maskMap[21]="255.255.248.0",maskMap[22]="255.255.252.0",maskMap[23]="255.255.254.0",maskMap[24]="255.255.255.0",maskMap[25]="255.255.255.128",maskMap[26]="255.255.255.192",maskMap[27]="255.255.255.224",maskMap[28]="255.255.255.240",maskMap[29]="255.255.255.248",maskMap[30]="255.255.255.252",maskMap[31]="255.255.255.254",maskMap[32]="255.255.255.255";